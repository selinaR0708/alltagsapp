import React, { useState, useEffect } from 'react';

export default function AlltagsAppPro() {
  const [todos, setTodos] = useState([]);
  const [newTodo, setNewTodo] = useState('');
  const [mealPrep, setMealPrep] = useState([]);
  const [newMeal, setNewMeal] = useState('');

  useEffect(() => {
    const savedTodos = JSON.parse(localStorage.getItem('todos') || '[]');
    const savedMeals = JSON.parse(localStorage.getItem('meals') || '[]');
    setTodos(savedTodos);
    setMealPrep(savedMeals);
  }, []);

  useEffect(() => {
    localStorage.setItem('todos', JSON.stringify(todos));
    localStorage.setItem('meals', JSON.stringify(mealPrep));
  }, [todos, mealPrep]);

  const addTodo = () => {
    if (newTodo.trim()) {
      setTodos([...todos, { text: newTodo, done: false }]);
      setNewTodo('');
    }
  };

  const toggleTodo = (index) => {
    const updated = [...todos];
    updated[index].done = !updated[index].done;
    setTodos(updated);
  };

  const addMeal = () => {
    if (newMeal.trim()) {
      setMealPrep([...mealPrep, newMeal]);
      setNewMeal('');
    }
  };

  return (
    <div className="min-h-screen bg-[#f9f9f9] text-[#111] p-4 max-w-md mx-auto font-sans">
      <h1 className="text-2xl font-bold mb-4">ğŸ“ AlltagsApp Pro</h1>

      <div className="bg-white rounded-2xl p-4 mb-6 shadow">
        <h2 className="text-xl font-semibold mb-2">To-Do</h2>
        <div className="flex gap-2 mb-2">
          <input
            className="flex-1 border rounded-xl px-3 py-1"
            value={newTodo}
            onChange={(e) => setNewTodo(e.target.value)}
            placeholder="Neue Aufgabe"
          />
          <button className="bg-black text-white px-3 rounded-xl" onClick={addTodo}>+</button>
        </div>
        <ul>
          {todos.map((todo, i) => (
            <li
              key={i}
              className={`py-1 ${todo.done ? 'line-through text-gray-400' : ''}`}
              onClick={() => toggleTodo(i)}
            >
              {todo.text}
            </li>
          ))}
        </ul>
      </div>

      <div className="bg-white rounded-2xl p-4 mb-6 shadow">
        <h2 className="text-xl font-semibold mb-2">ğŸ“… Kalender</h2>
        <p>{new Date().toLocaleDateString('de-DE', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' })}</p>
      </div>

      <div className="bg-white rounded-2xl p-4 shadow">
        <h2 className="text-xl font-semibold mb-2">ğŸ¥— Meal Prep</h2>
        <div className="flex gap-2 mb-2">
          <input
            className="flex-1 border rounded-xl px-3 py-1"
            value={newMeal}
            onChange={(e) => setNewMeal(e.target.value)}
            placeholder="Neues Gericht"
          />
          <button className="bg-black text-white px-3 rounded-xl" onClick={addMeal}>+</button>
        </div>
        <ul>
          {mealPrep.map((item, i) => (
            <li key={i} className="py-1">{item}</li>
          ))}
        </ul>
      </div>
    </div>
  );
}
